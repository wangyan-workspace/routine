<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>幸运数字机</title>
</head>
<body>
    <!-- 
        9.利用全局变量和函数，设计模拟幸运数字机游戏。
        设幸运数字为8，每次由计算机随机产生3个1-9之间(包括1和9）的随机数，
        当这3个随机数中有一个数字为8时，就算赢了一次，要求利用函数计算获胜率。
     -->
     <script>
         //方法一
         var total = 0;
         var win = 0;
         var winRate = 0;
         var isWin = false;

         function lucky() {
             var num = 0;
             numStr = '';
             isWin = false;
             for(var i=0;i<3;i++) {
                //  Math.floor()作用是取整
                 num = Math.floor(Math.random()*9+1);
                 numStr += num;
                 if(num ==8) {
                     //赢了
                     isWin = true;
                 }
             }
             if(isWin) {
                 win++;
             }
             total++;
             winRate = (win/total)*100+'%';
         }

         while (true) {
             lucky();
            //  如果点击取消按钮，终止执行
             if(!confirm(numStr + '\n' +(isWin ? '赢了' : '输了') + '\n胜率:' + winRate + '继续吗')) {
                 break;
             }
         }
     </script>

     <script>
         //方法二
         var win_rate=0;		//赢率 
         var play_times=0;	//总次数
         var wins=0;			//赢的次数
         var last_digits;	//上次数字串
         var last_win;	//上次是否赢?
         function PlayOnce()
        {//模拟玩一次数字机游戏
            var i,digit;
            play_times++;
            last_digits="";
            last_win=false;	
            for(i=0;i<3;i++)
            {
                digit = Math.floor(Math.random()*9)+1;
                last_digits += digit;
                if (digit==8) last_win=true;
            }
            if (last_win) wins++;
            win_rate = Math.floor(100*(wins/play_times));
        }
        while(true)
        {
            PlayOnce();
            if (!confirm(last_digits +"\n" + (last_win?"赢":"输") + "\n胜率"+win_rate+"%,继续吗?")) break;
        }
     </script>
</body>
</html>